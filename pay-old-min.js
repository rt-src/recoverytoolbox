var langVar="en";function getFileInfo(e){debug;var t=new XMLHttpRequest;t.open("GET",API+"/api/repair/files/"+langVar+"/"+e+"/amount",!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status&&t.response&&(resp=JSON.parse(t.response),debug,resp)){void 0!==resp.is_payed&&1==resp.is_payed&&(window.location=nextBasePage+"/download.html?id="+e);var n=document.getElementById("amount_pp");if(n&&(void 0!==n.innerText?n.innerText=resp.amount_pp?resp.amount_pp:"":void 0!==n.textContent&&(n.textContent=resp.amount_pp?resp.amount_pp:"")),n)if(void 0!==n.innerText&&""!=n.innerText){var a=n.innerText.split(" "),r=Number(a);gtag("event","generate_lead",{currency:"USD",value:r})}else if(void 0!==n.textContent&&""!=n.textContent){a=n.textContent.split(" "),r=Number(a);gtag("event","generate_lead",{currency:"USD",value:r})}var o=document.getElementById("amount_ya");if(o&&(void 0!==o.innerText?o.innerText=resp.amount_ya?resp.amount_ya:"":void 0!==o.textContent&&(o.textContent=resp.amount_ya?resp.amount_ya:"")),resp.amount_ya){var d=document.getElementById("amount_ya").parentElement.parentElement.parentElement;if(d.hasChildNodes())for(var i=d.childNodes,s=0;s<i.length;++s)i[s].removeAttribute&&i[s].removeAttribute("hidden");var p,l,u=document.getElementById("card-ya").parentNode.previousElementSibling;if(u&&u.classList.add("order-2"),(u=document.getElementById("card-pp").parentNode.previousElementSibling)&&u.classList.add("order-2"),resp.is_ru_by)(p=document.getElementById("card-ya").parentElement)&&p.classList.add("order-1"),(l=document.getElementById("card-pp").parentElement)&&l.classList.add("order-3");else(p=document.getElementById("card-ya").parentElement)&&p.classList.add("order-3"),(l=document.getElementById("card-pp").parentElement)&&l.classList.add("order-1")}}},t.send()}function getPayLink(e){debug;var t=new XMLHttpRequest;t.open("GET",API+"/api/repair/files/"+langVar+"/"+e+"/pay_link",!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status&&t.response&&(debug,t.response)){var e=JSON.parse(t.response),n=document.getElementById("card-pp");n?n.href=e.pay_pro?e.pay_pro:"":(document.getElementsByClassName("credit-card")[0].href=e.pay_pro?e.pay_pro:"",document.getElementById("link-text").href=e.pay_pro?e.pay_pro:"")}},t.send()}function getPayLinkForYa(e){debug;var t=new XMLHttpRequest;t.open("GET",API+"/api/repair/files/"+langVar+"/"+e+"/pay_link_ya",!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status&&t.response){debug;var e=document.getElementById("amount_ya");if(e)if(void 0!==e.innerText&&""!=e.innerText){var n=e.innerText.split(" "),a=Number(n);gtag("event","generate_lead",{currency:"RUB",value:a})}else if(void 0!==e.textContent&&""!=e.textContent){n=e.textContent.split(" "),a=Number(n);gtag("event","generate_lead",{currency:"RUB",value:a})}if(t.response){var r=JSON.parse(t.response);debug,r&&window.open(r.ya_link,"_self")}}},t.send()}"undefined"!=typeof lang&&(langVar=lang);var $_GET=getParams();if($_GET&&$_GET.id)sessionStorage.setItem("recoverytoolbox.lastid",$_GET.id),getFileInfo($_GET.id),getPayLink($_GET.id);else{const e=sessionStorage.getItem("recoverytoolbox.lastid");e&&($_GET.id=e,getFileInfo(e))}function page_load_complete(){var e=document.getElementById("card-ya");e&&e.addEventListener("click",(function(e){"undefined"!=typeof gtag&&gtag("event","click_yandex_payment"),e.preventDefault(),e.stopPropagation(),getPayLinkForYa($_GET.id)}),!1)}window.attachEvent?window.attachEvent("onload",page_load_complete):window.addEventListener?window.addEventListener("load",page_load_complete,!1):document.addEventListener("load",page_load_complete,!1);